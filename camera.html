<!DOCTYPE html>
<html>    

    <head>
        <script type="text/javascript" src="instascan.min.js" ></script>
        
        <script>
            function mensagem(){ 
                return alert("Há uma uma falha na câmera do dispositivo!");
            }
        </script>

        <style>
            .cam{
                width: 400px;
                padding: 10px;
                margin: 300px;
                border: 2px;
            }
        </style>

    </head>
    <body>
    
        <div class="cam">
        
            <video id="preview" style="width:auto"></video>
        
            <script>
                
                var link = "http://scaber.serveo.net/api/v1/salas/";

                let scanner = new Instascan.Scanner(
                    {
                        video: document.getElementById('preview')
                    }
                );
                scanner.addListener('scan', function(content){
                    alert('Escaneou o conteudo: ' + content);
                    window.open(link + content, "_blank");
                });
                Instascan.Camera.getCameras().then(cameras => 
                {
                    if(cameras.length > 0){
                        scanner.start(cameras[3]);
                    } else {
                        console.log(err);
                    }
                }).catch(function(err){
                    console.log(mensagem());
                });
            </script>
        </div>
    </body>
</html>